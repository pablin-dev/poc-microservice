function (request, state) {
    const { create } = require('xmlbuilder2');

    const root = create({ version: '1.0', encoding: 'utf-8' })
        .ele('soap:Envelope', { 'xmlns:soap': 'http://schemas.xmlsoap.org/soap/envelope/' })
        .ele('soap:Body')
        .ele('soap:Fault')
        .ele('faultcode').txt('soap:Server').up()
        .ele('faultstring').txt('Internal Server Error: Unhandled Request').up()
        .ele('detail')
        .ele('m:message', { 'xmlns:m': 'http://api.com' }).txt('The requested SOAP action or operation is not supported or could not be processed.').up()
        .up()
        .up()
        .up()
        .up();

    return {
        statusCode: 404,
        headers: { 'Content-Type': 'application/soap+xml' },
        body: root.end({ prettyPrint: true, headless: true })
    };
}
